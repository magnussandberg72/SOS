<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>📨 SOS – Message Center</title>
  <link rel="manifest" href="manifest.json"/>
  <link rel="icon" href="public/sos_favicon.png" type="image/png"/>
  <link rel="stylesheet" href="styles/message.css"/>
</head>
<body>
  <!-- Header -->
  <div id="header-placeholder"></div>
  <script>
    fetch("includes/header.html").then(r=>r.text()).then(h=>document.getElementById("header-placeholder").innerHTML=h);
  </script>

  <main class="wrap">
    <section class="top">
      <h1>📨 Message Center</h1>
      <p>Low-bandwidth messaging for shelters — offline first, built for resilience.</p>
      <div id="netStatus" class="chip offline" aria-live="polite">Offline</div>
      <div id="syncInfo" class="muted">Last sync: —</div>
    </section>

    <section class="panel">
      <div class="row">
        <label class="lbl">Group</label>
        <input id="group" placeholder="e.g., Kalix-East-01"/>
      </div>

      <div class="row">
        <label class="lbl">Author</label>
        <input id="author" placeholder="Your name (optional)"/>
      </div>

      <div class="row">
        <label class="lbl">Message</label>
        <textarea id="msg" maxlength="200" placeholder="Short status... (max 200 chars)"></textarea>
      </div>

      <div class="row compact">
        <label class="lbl">Add Bible verse ✝️</label>
        <input id="addVerse" type="checkbox" />
        <label class="lbl">Encrypt</label>
        <input id="useEnc" type="checkbox" />
        <input id="encKey" placeholder="Encryption key (shared)" />
      </div>

      <div class="actions">
        <button id="sendBtn" class="btn">Send</button>
        <button id="syncBtn" class="btn ghost">Sync</button>
        <button id="clearBtn" class="btn danger ghost">Clear Log</button>
      </div>
    </section>

    <section class="logPanel">
      <h2>📜 Local Log</h2>
      <div id="unsentChip" class="chip small">Unsent: 0</div>
      <div id="log" class="log" aria-live="polite"></div>
    </section>
  </main>

  <!-- Footer -->
  <div id="footer-placeholder"></div>
  <script>
    fetch("includes/footer.html").then(r=>r.text()).then(f=>document.getElementById("footer-placeholder").innerHTML=f);
  </script>

  <script src="scripts/message.js"></script>
</body>
</html>
